(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d90fdf7a"],{"1a19":function(t,e,n){"use strict";var o=n("b775"),a="article";e["a"]={save:function(t){return Object(o["a"])({url:"/".concat(a,"/save"),method:"post",data:t})},deleteById:function(t){return Object(o["a"])({url:"/".concat(a,"/deleteById/").concat(t),method:"delete"})},update:function(t){return Object(o["a"])({url:"/".concat(a,"/update"),method:"put",data:t})},getByPage:function(t){return Object(o["a"])({url:"/".concat(a,"/getByPage"),method:"post",data:t})},getById:function(t){return Object(o["a"])({url:"/".concat(a,"/get/").concat(t),method:"get"})},getAll:function(){return Object(o["a"])({url:"/".concat(a,"/getAll"),method:"get"})},getList:function(){return Object(o["a"])({url:"/".concat(a,"/getList"),method:"get"})},enable:function(t){return Object(o["a"])({url:"/".concat(a,"/enable/").concat(t),method:"put"})},disable:function(t){return Object(o["a"])({url:"/".concat(a,"/disable/").concat(t),method:"put"})},read:function(t){return Object(o["a"])({url:"/".concat(a,"/read/").concat(t),method:"get"})},getLastAndNextArticleVo:function(t){return Object(o["a"])({url:"/".concat(a,"/getLastAndNextArticleVo/").concat(t),method:"get"})}}},"5c01":function(t,e,n){"use strict";var o=n("ce76"),a=n.n(o);a.a},"667d":function(t,e,n){"use strict";var o=n("2b0e"),a=n("b2d8"),c=n.n(a);n("64e1"),n("c350");o["default"].use(c.a)},"8d74":function(t,e,n){"use strict";var o=n("9604"),a=n.n(o);a.a},9604:function(t,e,n){},b34e:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"read-container"},[n("div",{staticClass:"top-image"},[n("img",{attrs:{src:t.article.articleImage}})]),n("div",{staticClass:"article-container"},[n("a-spin",{attrs:{spinning:t.loading}},[n("div",[n("div",{staticClass:"article-title",attrs:{id:"article-title"}},[t._v(t._s(t.article.articleTitle))]),n("div",{staticClass:"article-operation"},[n("div",{staticClass:"operation-content"},[t._v(" 阅读 "),n("a-icon",{staticClass:"action-icon",attrs:{type:"eye"}}),n("span",{staticClass:"count-num"},[t._v(" "+t._s(t.article.readCount))]),t._v(" 收藏 "),n("a-icon",{staticClass:"action-icon",attrs:{type:"heart"}}),n("span",{staticClass:"count-num"},[t._v(" "+t._s(t.article.collectionCount))]),t._v(" 点赞 "),n("a-icon",{staticClass:"action-icon",attrs:{type:"like"}}),n("span",{staticClass:"count-num"},[t._v(" "+t._s(t.article.goodCount))])],1)]),n("div",{staticClass:"article-item"},[n("div",{staticClass:"created-time"},[n("a-icon",{staticClass:"meta-icon",attrs:{type:"clock-circle"}}),t._v(t._s(t.article.createdTime)+" ")],1),n("div",{staticClass:"article-meta"},[t.$store.getters.userId===t.article.authorId?n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.toEdit(t.article.articleId)}}},[n("a-icon",{staticClass:"meta-icon",attrs:{type:"edit"}}),n("span",{staticClass:"do-editer"},[t._v("编辑")])],1):t._e()])]),n("a-layout-content",[n("mavon-editor",{staticStyle:{zIndex:"1"},attrs:{"toolbars-flag":!1,subfield:!1,"default-open":"preview","code-style":"monokai",toolbars:t.markdownOption,ishljs:!0},model:{value:t.article.editContent,callback:function(e){t.$set(t.article,"editContent",e)},expression:"article.editContent"}}),n("div",{staticClass:"article-action"},[n("div",{staticClass:"article-good"},[n("a",{class:t.article.goodArticleFlag?"article-good meta-active":"article-good",attrs:{loading:t.goodLoading,href:"javascript:void(0);"},on:{click:t.saveGood}},[n("a-icon",{attrs:{type:"like"}}),t._v(" 点赞 ")],1)]),n("div",{staticClass:"article-collection"},[n("a",{class:t.article.collectionArticleFlag?"article-collection meta-active":"article-collection",attrs:{loading:t.collectionLoading,href:"javascript:void(0);"},on:{click:t.saveCollection}},[n("a-icon",{attrs:{type:"star"}}),t._v(" 收藏 ")],1)])]),n("div",{staticClass:"article-change"},[n("a",{attrs:{href:"#article-title"}},[n("div",{staticClass:"last-article",on:{click:function(e){return t.toLastArticle()}}},[n("a-icon",{attrs:{type:"arrow-left"}}),t._v(" 上一篇 "+t._s(null==t.lastArticle?"已经没有啦":t.lastArticle.articleTitle)+" ")],1)]),n("a",{attrs:{href:"#article-title"}},[n("div",{staticClass:"next-article",on:{click:function(e){return t.toNextArticle()}}},[t._v(" "+t._s(null==t.nextArticle?"已经没有啦":t.nextArticle.articleTitle)+" 下一篇 "),n("a-icon",{attrs:{type:"arrow-right"}})],1)])])],1)],1)])],1),n("div",{staticClass:"buttom-container"},[n("commentList",{attrs:{article:t.article}})],1)])},a=[],c=(n("667d"),n("1a19")),i=n("b775"),s="good",m={save:function(t){return Object(i["a"])({url:"/".concat(s,"/save"),method:"post",data:t})},delete:function(t){return Object(i["a"])({url:"/".concat(s,"/deleteById/").concat(t),method:"delete",data:t})},getByPage:function(t){return Object(i["a"])({url:"/".concat(s,"/getByPage"),method:"post",data:t})}},r="collection",l={save:function(t){return Object(i["a"])({url:"/".concat(r,"/save"),method:"post",data:t})},delete:function(t){return Object(i["a"])({url:"/".concat(r,"/deleteById/").concat(t),method:"delete",data:t})},getByPage:function(t){return Object(i["a"])({url:"/".concat(r,"/getByPage"),method:"post",data:t})}},u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-list-container"},[n("div",{staticClass:"user-comment"},[n("a-textarea",{attrs:{placeholder:"请输入内容，不超过300字",rows:3},model:{value:t.articleCommentContent,callback:function(e){t.articleCommentContent=e},expression:"articleCommentContent"}}),n("div",{staticClass:"comment-button"},[n("a-button",{attrs:{type:"primary",loading:t.commentLoading},on:{click:function(e){return t.saveArticleComment(t.articleCommentContent)}}},[t._v("发表评论")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.countShow,expression:"countShow"}],staticClass:"content-count"},[t._v(" 还能输入 "+t._s(t.commentContentCount)+" 个字符 ")])],1)],1),0!=t.articleCommentPage.list?n("div",{staticClass:"scree-container"},[n("div",{staticClass:"scree-menu"},[n("a-menu",{attrs:{mode:"horizontal"},on:{click:t.changeSort},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}},[n("a-menu-item",{key:"commentTime"},[t._v("最新")]),n("a-menu-item",{key:"goodCount"},[t._v("点赞最多")]),n("a-menu-item",{key:"commentCount"},[t._v("评论最多")])],1)],1)]):t._e(),0!=t.articleCommentPage.list?n("div",{staticClass:"article-comment-container"},t._l(t.articleCommentPage.list,(function(e){return n("div",{key:e.commentId},[n("a-comment",[n("span",{attrs:{slot:"actions"},slot:"actions"},[n("a-icon",{class:e.goodCommentFlag?"meta-active":"",attrs:{type:"like"},on:{click:function(n){return t.saveGoodArticleComment(e)}}}),t._v(" "+t._s(e.goodCount)+" ")],1),t.$store.getters.userId===e.commentUserId||t.$store.getters.userId===t.article.authorId?n("span",{attrs:{slot:"actions"},slot:"actions"},[n("a-popconfirm",{attrs:{title:"确认删除该条评论?","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(n){return t.deleteArticleComment(e)}}},[n("a",{attrs:{href:"#"}},[t._v("删除")])])],1):t._e(),n("span",{key:"comment-nested-reply-to",attrs:{slot:"actions"},on:{click:function(n){return t.doSaveCommentComment(e)}},slot:"actions"},[t._v("回复")]),n("span",{style:{margin:"20px 50px"},attrs:{slot:"actions"},slot:"actions"},[t._v("共"+t._s(e.commentCount)+"条回复 "),t.showCommentComment!=e.commentId&&0!==e.commentCount?n("a",{on:{click:function(n){return t.getCommentCommentList(e.commentId)}}},[t._v("点击查看")]):t._e(),t.showCommentComment===e.commentId?n("a",{on:{click:function(n){return t.hiddenCommentComment(e.commentId)}}},[t._v("收起")]):t._e()]),n("span",{attrs:{slot:"author"},slot:"author"},[t.article.authorName===e.username?n("a-tag",{style:{float:"left"},attrs:{color:"orange"}},[t._v(" 作者 ")]):t._e(),t.$store.getters.userId===e.commentUserId?n("a-tag",{style:{float:"left"},attrs:{color:"blue"}},[t._v(" 我的 ")]):t._e(),n("a",[t._v(t._s(e.username))])],1),n("a-avatar",{attrs:{slot:"avatar",size:32,src:e.header},slot:"avatar"}),n("span",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(e.commentContent)+" ")]),n("a-tooltip",{attrs:{slot:"datetime"},slot:"datetime"},[n("span",[t._v(t._s(e.commentTime))])]),t.showCommentComment===e.commentId?n("div",{staticClass:"comment-comment-list",on:{scroll:function(n){return t.scrollLoadMore(n,e)}}},t._l(t.commentCommentList,(function(o){return n("a-comment",{key:o.commentId},[n("span",{attrs:{slot:"actions"},slot:"actions"},[n("a-icon",{class:o.goodCommentFlag?"meta meta-active":"meta",attrs:{type:"like"},on:{click:function(n){return t.saveGoodCommentComment(o,e)}}}),t._v(" "+t._s(o.commentGood)+" ")],1),n("span",{attrs:{slot:"actions"},on:{click:function(e){return t.deleteCommentComment(o)}},slot:"actions"},[t._v("删除")]),n("span",{attrs:{slot:"actions"},on:{click:function(n){return t.doSaveCommentCommentWithParent(o,e)}},slot:"actions"},[t._v("回复")]),n("span",{attrs:{slot:"author"},slot:"author"},[t.article.authorName===o.username?n("a-tag",{style:{float:"left"},attrs:{color:"orange"}},[t._v(" 作者 ")]):t._e(),t.$store.getters.userId===o.commentUserId?n("a-tag",{style:{float:"left"},attrs:{color:"blue"}},[t._v(" 我的 ")]):t._e(),n("a",[t._v(t._s(o.username))])],1),n("a-avatar",{attrs:{slot:"avatar",src:o.header},slot:"avatar"}),n("span",{attrs:{slot:"content"},slot:"content"},[n("p",[t._v("回复 @"+t._s(o.commentParentUserName))]),t._v(" "+t._s(o.commentContent)+" ")]),n("a-tooltip",{attrs:{slot:"datetime"},slot:"datetime"},[n("span",[t._v(t._s(o.commentTime))])])],1)})),1):t._e(),""!==t.commentParentUser&&e.commentId===t.doCurrentComment?n("div",{staticClass:"user-comment",attrs:{id:"commentCommentContent"}},[n("div",{staticClass:"comment-top"},[n("a-avatar",{attrs:{slot:"avatar",size:72.4,src:t.$store.getters.header},slot:"avatar"}),n("a-textarea",{style:{maxWidth:"90%"},attrs:{placeholder:"回复@"+t.commentParentUser,rows:3},model:{value:t.commentCommentContent,callback:function(e){t.commentCommentContent=e},expression:"commentCommentContent"}})],1),n("div",{staticClass:"comment-button"},[n("a-button",{attrs:{type:"primary",loading:t.commentCommentLoading},on:{click:function(n){return t.saveCommentComment(e.commentId)}}},[t._v("发表评论")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.cCountShow,expression:"cCountShow"}],staticClass:"content-count"},[t._v(" 还能输入 "+t._s(t.commentContentCount)+" 个字符 ")])],1)]):t._e()],1)],1)})),0):t._e(),t.articleCommentPage.list>t.articleCommentPage.pageSize?n("el-pagination",{staticClass:"comment-pagination",attrs:{align:"center","current-page":t.articleCommentPage.currentPage,"page-size":t.articleCommentPage.pageSize,layout:"total, prev, pager, next, jumper",total:t.articleCommentPage.totalCount},on:{"current-change":t.handleCurrentChange}}):t._e()],1)},d=[],g="comment",C={save:function(t){return Object(i["a"])({url:"/".concat(g,"/save"),method:"post",data:t})},deleteById:function(t){return Object(i["a"])({url:"/".concat(g,"/deleteById/").concat(t),method:"delete"})},getByPage:function(t){return Object(i["a"])({url:"/".concat(g,"/getByPage"),method:"post",data:t})}},h={props:{article:{type:Object,default:null}},data:function(){return{userId:this.$store.getters.userId,header:this.$store.getters.header,articleCommentPage:{currentPage:1,pageSize:5,totalCount:0,totalPage:0,params:{commentType:0,commentTarget:this.$route.params.id},sortColumn:"commentTime",sortMethod:"asc",list:[]},commentCommentPage:{currentPage:1,pageSize:10,totalCount:0,totalPage:0,params:{commentType:1,commentTarget:""},sortColumn:"commentTime",sortMethod:"asc",list:[]},commentLoading:!1,commentCommentLoading:!1,current:["commentTime"],comment:{commentContent:"",goodCount:"",commentTarget:"",commentType:0,commentRoot:"",commentParentUser:"",commentParentUserId:""},good:{goodTarget:"",goodType:2},doCurrentComment:"",commentParentUser:"",commentCommentList:[],showCommentComment:"",countShow:!1,cCountShow:!1,articleCommentContent:"",commentCommentContent:"",commentContentCount:300}},watch:{"$store.getters.token":function(){void 0!==this.$store.getters.token&&this.getArticleCommentList()},articleCommentContent:function(t,e){this.articleCommentContent.length>300&&(this.articleCommentContent=this.articleCommentContent.substring(0,300)),this.articleCommentContent.length>0?this.countShow=!0:this.countShow=!1;var n=t?t.length:0,o=e?e.length:0;this.commentContentCount=this.commentContentCount-(n-o)},commentCommentContent:function(t,e){this.commentCommentContent.length>300&&(this.commentCommentContent=this.commentCommentContent.substring(0,300)),this.commentCommentContent.length>0?this.cCountShow=!0:this.cCountShow=!1;var n=t?t.length:0,o=e?e.length:0;this.commentContentCount=this.commentContentCount-(n-o)}},created:function(){var t,e=this;clearTimeout(t),t=setTimeout((function(){void 0!==e.$store.getters.token&&e.getArticleCommentList()}),1e3)},methods:{getArticleCommentList:function(){var t=this;this.articleCommentPage.list=[],C.getByPage(this.articleCommentPage).then((function(e){console.log(e),t.articleCommentPage=e.data})).catch((function(e){t.$message.error(e.msg)}))},getCommentCommentList:function(t){var e=this;this.commentCommentPage.list=[],this.commentCommentPage.params.commentTarget=t,C.getByPage(this.commentCommentPage).then((function(n){console.log(n),e.commentCommentPage=n.data,e.commentCommentList=n.data.list,e.showCommentComment=t}))},saveArticleComment:function(t){var e=this;this.commentLoading=!0,t.length<=0?(this.$message.error("错误提示: 评论内容不能为空！"),this.commentLoading=!1):(this.comment.commentType=0,this.comment.commentTarget=this.$route.params.id,this.comment.commentRoot=this.$route.params.id,this.comment.commentContent=this.articleCommentContent,this.comment.commentParentUser=null,C.save(this.comment).then((function(t){e.articleCommentContent="",e.commentLoading=!1,e.getArticleCommentList(),e.$message.success(t.msg)})).catch((function(){e.commentLoading=!1})))},saveCommentComment:function(t){var e=this;this.comment.commentRoot=this.$route.params.id,this.comment.commentContent=this.commentCommentContent,this.comment.commentType=1,C.save(this.comment).then((function(n){e.commentCommentContent="",e.commentCommentLoading=!1,e.getCommentCommentList(t),e.$message.success(n.msg)})).catch((function(){e.commentLoading=!1}))},hiddenCommentComment:function(){this.showCommentComment=0},scrollLoadMore:function(){},deleteArticleComment:function(t){var e=this;C.deleteById(t.commentId).then((function(t){e.$message.success(t.msg),e.getArticleCommentList()}))},deleteCommentComment:function(t){var e=this;this.$confirm("是否删除？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){C.deleteById(t.commentId).then((function(n){e.$message.success(n.msg),e.getCommentCommentList(t.commentTarget)}))}))},saveGoodArticleComment:function(t){var e=this;this.good.goodTarget=t.commentId,this.good.goodType=2,m.save(this.good).then((function(t){e.$message.success(t.msg),e.getArticleCommentList()}))},saveGoodCommentComment:function(t,e){var n=this;this.good.goodTarget=t.commentId,this.good.goodType=2,m.save(this.good).then((function(t){n.$message.success(t.msg),n.getCommentCommentList(e)}))},doSaveCommentComment:function(t){this.comment={},this.doCurrentComment=t.commentId,this.commentParentUser=t.username,this.comment.commentTarget=t.commentId,this.comment.commentParentUserId=t.commentUserId},doSaveCommentCommentWithParent:function(t,e){this.doCurrentComment=e.commentId,this.commentParentUser=t.username,this.comment.commentParentUserId=e.commentUserId,this.comment.commentTarget=e.commentId},changeSort:function(t){this.articleCommentPage.sortColumn=t.key,this.getArticleCommentList(this.articleCommentPage)},handleSizeChange:function(t){this.articleCommentPage.pageSize=t,this.getArticleCommentList(this.articleCommentPage)},handleCurrentChange:function(t){this.articleCommentPage.currentPage=t,this.getArticleCommentList(this.articleCommentPage)}}},v=h,f=(n("5c01"),n("2877")),p=Object(f["a"])(v,u,d,!1,null,"50c34fa1",null),_=p.exports,y={components:{CommentList:_},data:function(){return{markdownOption:{},article:{articleId:"",articleAuthor:"",goodArticleFlag:!1,collectionArticleFlag:!1},good:{goodTarget:"",goodType:1},collection:{collectionTarget:"",collectionType:1},lastAndNextArticleList:[],lastArticle:{articleId:0},nextArticle:{articleId:0},loading:!0,commentLoading:!1,goodLoading:!1,collectionLoading:!1}},watch:{$route:function(){this.read(),this.getLastAndNextArticleVo()}},created:function(){this.read(),this.getLastAndNextArticleVo()},methods:{read:function(){var t=this;this.article.articleId=this.$route.params.id,c["a"].read(this.article.articleId).then((function(e){t.article=e.data,t.loading=!1}))},getLastAndNextArticleVo:function(){var t=this;this.article.articleId=this.$route.params.id,c["a"].getLastAndNextArticleVo(this.article.articleId).then((function(e){t.lastAndNextArticleList=e.data,t.lastArticle=t.lastAndNextArticleList[0],t.nextArticle=t.lastAndNextArticleList[1]}))},toLastArticle:function(){null!=this.lastArticle&&this.$router.push("/articleRead/"+this.lastArticle.articleId)},toNextArticle:function(){null!=this.nextArticle&&this.$router.push("/articleRead/"+this.nextArticle.articleId)},saveGood:function(){var t=this;!1===this.article.goodArticleFlag?(this.good.goodTarget=this.$route.params.id,m.save(this.good).then((function(e){t.article.goodArticleFlag=!0,t.$message.success(e.msg),console.log(e)}))):this.$message.info("操作提示: 您已点赞，请勿重复点赞！")},saveCollection:function(){var t=this;!1===this.article.collectionArticleFlag?(this.collection.collectionTarget=this.$route.params.id,l.save(this.collection).then((function(e){t.article.collectionArticleFlag=!0,t.$message.success(e.msg),console.log(e)}))):this.$message.info("操作提示: 您已收藏，请勿重复收藏！")},goBack:function(){this.$router.go(-1)},toEdit:function(){this.$router.push({path:"/create",query:{id:this.$route.params.id}})}}},A=y,I=(n("8d74"),Object(f["a"])(A,o,a,!1,null,"7f1579fa",null));e["default"]=I.exports},ce76:function(t,e,n){}}]);